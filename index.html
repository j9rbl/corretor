function countStripes() {
    const correctedCanvas = document.getElementById('correctedCanvas');
    const correctedContext = correctedCanvas.getContext('2d');
    const correctedData = correctedContext.getImageData(0, 0, correctedCanvas.width, correctedCanvas.height);

    const blockSize = 7;
    const blockHeight = 5;
    const totalBlocksX = Math.floor(correctedCanvas.width / blockSize);
    const totalBlocksY = Math.floor(correctedCanvas.height / blockHeight);

    stripesCount = {};

    for (let blockY = 0; blockY < totalBlocksY; blockY++) {
        for (let blockX = 0; blockX < totalBlocksX; blockX++) {
            const startX = blockX * blockSize;
            const startY = blockY * blockHeight;

            // Iterating over Y-axis to cover each row in the block
            for (let y = startY; y < startY + blockHeight; y++) {
                // Análise da primeira fileira do bloco
                let currentColor = null;
                let currentStripeWidth = 0;

                for (let x = startX; x < startX + blockSize; x++) {
                    const pixelColor = getColorAtPixel(correctedData, x, y);

                    if (currentColor === null || currentColor === pixelColor) {
                        // Continua a faixa
                        currentColor = pixelColor;
                        currentStripeWidth++;
                    } else {
                        // Finaliza a faixa anterior
                        recordStripe(currentColor, currentStripeWidth);

                        // Inicia nova faixa
                        currentColor = pixelColor;
                        currentStripeWidth = 1;
                    }
                }

                // Finaliza a última faixa na linha
                recordStripe(currentColor, currentStripeWidth);
            }
        }
    }

    updateResultsTable();
}
